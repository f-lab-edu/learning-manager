@startuml

title 2.1 [P0] Course Creation : 스터디 과정 생성

actor "User (Admin)" as User
participant "JwtAuthenticationFilter" as Filter
participant "CourseCreateController" as Controller
participant "CourseCreationService" as AppService
participant "MemberQueryRepository" as MemberQueryRepo
participant "Course" as CourseDomain
participant "CourseCommandRepository" as CommandRepo

User -> Controller: POST /api/v1/courses
note left: with Authorization header
activate Controller

Controller -> AppService: createCourse(request)
activate AppService

AppService -> MemberQueryRepo: findById(adminId)
note left: adminId from AuthenticationContextHolder
activate MemberQueryRepo
MemberQueryRepo --> AppService: adminMember
deactivate MemberQueryRepo

note right of AppService: Verify user is ADMIN

AppService -> CourseDomain: create(title, description)
activate CourseDomain
deactivate CourseDomain

AppService -> CourseDomain: addMember(adminId, MANAGER)
activate CourseDomain
deactivate CourseDomain

AppService -> CommandRepo: create(newCourse)
activate CommandRepo
CommandRepo --> AppService: savedCourse
deactivate CommandRepo

AppService --> Controller: CourseCreation.Response
deactivate AppService

Controller --> User: 201 Created
deactivate Controller

@enduml
